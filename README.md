# 🎯 OVH 服务器自动抢购系统

> **🌟 多用户抢购版：** [https://github.com/iniwex5/OVH](https://github.com/iniwex5/OVH)

一个功能强大的 OVH 服务器管理平台，支持自动抢购、监控、账户管理等一站式服务。

## 📦 项目地址

**GitHub 项目源：** [https://github.com/coolci/OVH-BUY](https://github.com/coolci/OVH-BUY)

**当前版本：** v3.0.0

---

## 🆕 版本更新日志

### v3.0.0 (最新版本)

#### ✨ 新增功能
- **Telegram WEBHOOK 下单**：支持通过 Telegram 发送特定格式消息快速下单，支持 5 种下单模式
- **自动下单数量功能**：在服务器监控中添加数量配置，支持批量下单
- **智能下单触发**：仅在状态从"无货"变为"有货"时触发，避免重复下单

#### 🎨 界面优化
- **改进输入体验**：数量、重试间隔等字段支持自由输入，无限制验证
- **优化 Dashboard 布局**：改进统计卡片布局，统一链接高度和样式
- **优化缓存管理界面**：重新设计清除缓存按钮，更符合整体风格

#### 🔧 功能改进
- **自动下单计算**：总订单数 = 可用配置 × 可用机房 × 指定数量
- **绕过重复限制**：自动下单不受 2 分钟重复下单限制
- **更好的视觉反馈**：改进按钮样式和交互效果

---

## ✨ 主要功能

### 🚀 自动抢购系统
- **智能队列管理**：支持多任务并发抢购，自动重试机制
- **实时监控**：自动检测服务器库存状态，第一时间发现可购买资源
- **历史记录**：完整记录抢购成功/失败历史，便于分析
- **状态仪表盘**：实时显示抢购队列状态、成功数量、失败统计等
- **自由输入体验**：数量、重试间隔等字段支持自由输入，无限制验证
- **Telegram WEBHOOK 下单**：支持通过 Telegram 发送特定格式消息快速下单（v3.0.0 新增）

### 🖥️ 服务器管理
- **服务器列表**：查看所有 OVH 服务器信息（状态、IP、配置等）
- **服务器控制**：支持重启、重装系统、查看任务进度
- **系统安装**：可视化安装流程，支持自定义分区方案
- **硬件信息**：查看 CPU、内存、磁盘等硬件配置详情
- **性能监控**：实时监控服务器资源使用情况

### 📊 可用性监控
- **数据中心查询**：实时查询全球 OVH 数据中心服务器可用性
- **多区域支持**：支持 EU、US、CA 三个区域
- **智能筛选**：按数据中心、内存、可用性状态等条件筛选
- **VPS 监控**：支持 VPS 型号监控，自动检测可用性变化
- **自动下单数量**：支持配置下单数量，计算公式：可用配置 × 可用机房 × 指定数量（v3.0.0 新增）
- **智能下单触发**：仅在状态从"无货"变为"有货"时触发下单，避免重复下单（v3.0.0 新增）

### 💼 账户管理
- **账户信息**：查看客户代码、KYC 状态、账户状态、货币等信息
- **邮件历史**：查看 OVH 发送的所有邮件通知（最新 50 封）
  - 自动格式化邮件内容
  - 自动识别并转换链接为可点击格式
  - 保留原始格式和换行
- **退款记录**：查看账户退款历史记录（最多 20 条）
- **联系人管理**：支持变更服务器联系人信息
  - 查看联系人变更请求
  - 接受/拒绝变更请求
  - 重发确认邮件

### 📈 监控与日志
- **实时日志**：查看系统运行日志，支持按类型筛选
- **操作历史**：记录所有操作历史，便于追溯
- **状态监控**：监控队列处理器和监控服务的运行状态

### ⚙️ 系统设置
- **OVH API 配置**：配置 OVH API 凭据（Application Key、Secret、Consumer Key）
- **安全设置**：配置访问密码和 API 密钥
- **多区域支持**：支持 EU、US、CA 三个区域切换
- **缓存管理**：优化后的缓存管理界面，支持清除后端缓存（v3.0.0 优化）

---

## 🛠️ 技术栈

### 前端
- **React 18** + **TypeScript** - 现代化前端框架
- **Vite** - 快速构建工具
- **Tailwind CSS** - 实用优先的 CSS 框架
- **Framer Motion** - 流畅的动画效果
- **React Router** - 路由管理
- **Axios** - HTTP 客户端
- **Recharts** - 数据可视化图表

### 后端
- **Python Flask** - 轻量级 Web 框架
- **OVH Python SDK** - OVH API 官方客户端
- **Docker** + **Docker Compose** - 容器化部署

### 特色
- 🎨 **赛博朋克风格 UI** - 独特的视觉设计
- 📱 **响应式设计** - 完美支持移动端和桌面端
- 🔒 **安全认证** - 密码门禁和 API 密钥保护
- ⚡ **实时更新** - 自动轮询最新状态
- 🚀 **高性能** - 异步处理，快速响应

---

## 🚀 快速开始

### 前置要求
- Docker 和 Docker Compose
- OVH API 凭据（Application Key、Secret、Consumer Key）

### 安装步骤
一行命令
```
git clone https://github.com/coolci/OVH-BUY.git && cd OVH-BUY && echo "API_SECRET_KEY=你的密钥" > backend/.env && docker compose up -d --build

```
1. **克隆项目**
```bash
git clone https://github.com/coolci/OVH-BUY.git
cd OVH-BUY
```

2. **配置安全密钥**

编辑 `backend/.env` 文件：
```env
API_SECRET_KEY=你的密钥
```

3. **启动服务**
```bash
docker compose up -d --build
```

4. **访问系统**

打开浏览器访问：**http://YOUR_IP:20000**

5. **首次配置**

- 访问 `http://YOUR_IP:20000/settings`
- 填写"网站安全密钥"（与 `backend/.env` 中的 `API_SECRET_KEY` 一致）
- 填写 OVH API 凭据
- 保存配置

**就这么简单！** ✨

---

## 📸 功能预览

### 仪表盘
- 实时统计：活跃队列、服务器总数、可用服务器、抢购成功/失败数量
- 快速操作：查看队列、监控状态、快速添加任务

### 服务器管理
- 完整的服务器信息展示
- 一键重启、重装系统
- 可视化安装进度
- 硬件配置详情

### 账户管理
- 账户状态一目了然
- 邮件历史清晰展示
- 联系人变更管理

---

## 🔧 功能亮点

### 1. 智能抢购队列
- 自动重试机制
- 可配置重试间隔
- 支持暂停/恢复
- 实时状态更新

### 2. 邮件历史优化
- 自动格式化邮件内容
- URL 自动识别为可点击链接
- 保留原始格式和换行
- 支持最新 50 封邮件

### 3. 联系人变更管理
- 查看所有联系人变更请求
- 支持接受/拒绝操作
- 重发确认邮件
- 清晰的 Token 输入指引

### 4. 多区域支持
- EU（欧洲）
- US（美国）
- CA（加拿大）

### 5. Telegram WEBHOOK 下单（v3.0.0 新增）
- 支持通过 Telegram 发送特定格式消息快速下单
- 多种下单模式，灵活配置
- 自动解析消息并创建订单

### 6. 自动下单数量功能（v3.0.0 新增）
- 支持配置下单数量
- 智能计算总订单数：可用配置 × 可用机房 × 指定数量
- 不受 2 分钟重复下单限制

---

## 📝 使用说明

### 添加抢购任务
1. 进入"可用性查询"页面
2. 选择目标服务器型号和数据中心
3. 点击"添加到队列"
4. 系统自动开始监控和抢购

### 监控服务器可用性
1. 进入"VPS 监控"页面
2. 添加要监控的 VPS 型号
3. 配置通知选项
4. 系统自动检测可用性变化

### 管理联系人变更
1. 进入"服务器控制"页面
2. 点击"变更服务器联系人"
3. 在"管理请求"标签页查看请求
4. 从邮件中获取 Token 并输入
5. 接受或拒绝请求

### 使用 Telegram WEBHOOK 下单（v3.0.0 新增）

通过 Telegram 发送特定格式的消息即可快速下单，无需打开网页。

#### 消息格式
```
plancode [datacenter] [quantity] [options]
```

#### 支持的下单模式

**模式 1：仅型号**
```
24sk202
```
- 使用所有可用配置和所有可用机房
- 数量默认为 1
- 计算公式：可用配置 × 可用机房 × 1

**模式 2：型号 + 机房 + 数量**
```
24sk202 rbx 1
```
- 指定机房和数量
- 计算公式：可用配置 × 1 个机房 × 指定数量

**模式 3：型号 + 数量（不指定机房）**
```
24sk202 1
```
- 不指定机房，使用所有可用机房
- 计算公式：可用配置 × 可用机房 × 指定数量

**模式 4：完整格式（型号 + 机房 + 数量 + 可选配置）**
```
24sk202 rbx 1 ram-64g-ecc-2133-24sk20,softraid-2x450nvme-24sk20
```
- 指定型号、机房、数量和可选配置
- 可选配置用逗号分隔
- 只会匹配包含这些配置选项的配置

**模式 5：型号 + 数量 + 可选配置（不指定机房）**
```
24sk202 1 ram-64g-ecc-2133-24sk20,softraid-2x450nvme-24sk20
```
- 不指定机房，但指定了数量和可选配置
- 计算公式：匹配的配置 × 可用机房 × 指定数量

#### 下单规则说明

1. **自动过滤**：系统会自动过滤无货的配置和机房
2. **配置匹配**：如果指定了配置选项，只会匹配包含这些选项的配置
3. **机房限制**：如果指定了机房，只会在该机房创建订单
4. **默认值**：未指定的参数将使用默认值（所有可用配置/所有可用机房/数量 1）

#### 配置 Telegram WEBHOOK

1. 在 Telegram Bot 中设置 Webhook 地址
2. 确保后端已配置 Telegram Bot Token
3. 发送符合格式的消息即可自动下单

### 使用自动下单数量功能（v3.0.0 新增）

在"服务器监控"页面添加订阅时，可以配置自动下单数量：

1. **添加订阅**
   - 进入"服务器监控"页面
   - 填写服务器型号
   - 勾选"自动下单"选项

2. **配置数量**
   - 勾选"自动下单"后，会显示"数量"输入框
   - 输入要下单的数量（默认为 1）
   - 系统会自动计算总订单数

3. **下单规则**
   - 总订单数 = 检测出的配置数量 × 可用数据中心 × 指定数量
   - 仅在状态从"无货"变为"有货"时触发下单
   - 不受 2 分钟重复下单限制

4. **示例**
   - 假设检测到 2 个可用配置，3 个可用数据中心，数量设置为 2
   - 总订单数 = 2 × 3 × 2 = 12 个订单

---

## 🤝 社区支持

- **OVH 中文群组：** [https://t.me/OVHGroup](https://t.me/OVHGroup) - OVH 中文用户交流分享群组

---

## 🙏 致谢

感谢以下人员和组织的协助与支持：

### 测试支持
- **[@szzc1227](https://t.me/szzc1227)** - 协助测试

### 技术支持
- **[@mtrucc](https://github.com/mtrucc)** - 技术支持

### 💼 OVH 采购服务

> 💡 **如对 OVH 有任何采购需求，欢迎联系 [@szzc1227](https://t.me/szzc1227)**

---

## 📄 许可证

MIT License

---

## ⚠️ 注意事项

### 重要声明

1. **项目性质**：本项目源于自己使用，不接受任何 BUG 汇报和功能许愿
2. **需求实现**：可能您提出的任何需求都不会被实现
3. **技术支持**：基础部署、反向代理、Webhook 相关问题请自行解决

### 使用须知

1. **API 配额**：请注意 OVH API 的调用频率限制
2. **安全密钥**：请妥善保管 API 密钥和访问密码
3. **数据备份**：建议定期备份重要配置
4. **合规使用**：请遵守 OVH 服务条款和当地法律法规

### OVH 常识问题

1. **自动支付**：下单后**不会自动支付**，需要手动完成支付
2. **订单有效期**：下单后的有效期为 **15 天**，请在有效期内完成支付

---


**如果这个项目对您有帮助，欢迎 Star ⭐ 和 Fork！**

